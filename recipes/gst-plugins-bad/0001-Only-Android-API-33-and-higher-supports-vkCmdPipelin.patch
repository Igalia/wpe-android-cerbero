From f7d94f114da0bd62ba15657470e45f66fdfac9ed Mon Sep 17 00:00:00 2001
From: Adrian Perez de Castro <aperez@igalia.com>
Date: Tue, 8 Jul 2025 14:28:05 +0300
Subject: [PATCH] Only Android API 33 and higher supports vkCmdPipelineBarrier2

---
 gst-libs/gst/vulkan/meson.build | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/gst-libs/gst/vulkan/meson.build b/gst-libs/gst/vulkan/meson.build
index 454cd4f..ba24ac6 100644
--- a/gst-libs/gst/vulkan/meson.build
+++ b/gst-libs/gst/vulkan/meson.build
@@ -322,7 +322,7 @@ if get_option('vulkan-video').allowed()
   video_test = '''
 #include <vulkan/vulkan.h>
 
-#if !(defined(VK_VERSION_1_4) || (defined(VK_VERSION_1_3) && VK_HEADER_VERSION >= 275))
+#if !(defined(VK_VERSION_1_4) || (defined(VK_VERSION_1_3) && VK_HEADER_VERSION >= 275 && (!defined(__ANDROID_API__) || __ANDROID_API__ >= 33)))
 #error "Need at least Vulkan 1.3.275"
 #endif
 
-- 
2.50.0

